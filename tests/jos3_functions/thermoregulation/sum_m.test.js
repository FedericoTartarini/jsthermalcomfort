import { sum_m } from "../../../src/jos3_functions/thermoregulation/sum_m";
import { describe, it, expect } from "@jest/globals";
import { $lerp } from "../../../src/supa";

describe("sum_m", () => {
  it("returns correct result", () => {
    const result = sum_m(
      [
        $lerp(17, 9, 12),
        $lerp(17, 12, 15),
        $lerp(17, 15, 18),
        $lerp(17, 18, 21),
      ],
      $lerp(17, 1, 3),
      $lerp(17, 3, 6),
      $lerp(17, 6, 9),
    );

    const expected = [
      [
        15, 19.64705882352941, 20.294117647058822, 20.941176470588236,
        16.41176470588235, 22.235294117647058, 22.88235294117647,
        23.52941176470588, 24.176470588235297, 24.823529411764703,
        25.47058823529412, 26.11764705882353, 26.764705882352942,
        27.411764705882355, 28.05882352941176, 28.70588235294118,
        29.35294117647059,
      ],
      [
        16, 12.176470588235293, 12.352941176470589, 12.529411764705882,
        17.88235294117647, 12.882352941176471, 13.058823529411764,
        13.235294117647058, 13.411764705882353, 13.588235294117647,
        13.764705882352942, 13.941176470588236, 14.117647058823529,
        14.294117647058824, 14.470588235294118, 14.647058823529413,
        14.823529411764707,
      ],
      [
        15, 15.176470588235293, 15.352941176470589, 15.529411764705882,
        15.705882352941176, 15.882352941176471, 16.058823529411764,
        16.235294117647058, 16.41176470588235, 16.58823529411765,
        16.764705882352942, 16.941176470588236, 17.11764705882353,
        17.294117647058822, 17.470588235294116, 17.647058823529413,
        17.823529411764707,
      ],
      [
        18, 18.176470588235293, 18.352941176470587, 18.529411764705884,
        18.705882352941178, 18.88235294117647, 19.058823529411764,
        19.235294117647058, 19.41176470588235, 19.58823529411765,
        19.764705882352942, 19.941176470588236, 20.11764705882353,
        20.294117647058822, 20.470588235294116, 20.647058823529413,
        20.823529411764707,
      ],
    ];

    expect(result).toStrictEqual(expected);
  });
});
