import { evaporation } from "../../../src/jos3_functions/thermoregulation/evaporation";
import { describe, it, expect } from "@jest/globals";
import { $lerp } from "../../../src/supa";

describe("evaporation", () => {
  it.each([
    {
      age: 20,
      expected: {
        wet: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
        e_sk: [
          0.004420996652136314, 0.0011646364611922826, 0.007023044521841013,
          0.006457100621978046, 0.008858431024693742, 0.0038460633174753314,
          0.00252286197266619, 0.0020015067890885013, 0.0038416527864739195,
          0.0025204162156181598, 0.001999912215712484, 0.008358342628176788,
          0.0044786588949412105, 0.0022392191316776616, 0.008357096152882038,
          0.004478669832318175, 0.002239555218630907,
        ],
        e_max: [
          0.004420996652136314, 0.0011646364611922826, 0.007023044521841013,
          0.006457100621978046, 0.008858431024693742, 0.0038460633174753314,
          0.00252286197266619, 0.0020015067890885013, 0.0038416527864739195,
          0.0025204162156181598, 0.001999912215712484, 0.008358342628176788,
          0.0044786588949412105, 0.0022392191316776616, 0.008357096152882038,
          0.004478669832318175, 0.002239555218630907,
        ],
        e_sweat: [
          0.004420996652136314, 0.0011646364611922826, 0.007023044521841013,
          0.006457100621978046, 0.008858431024693742, 0.0038460633174753314,
          0.00252286197266619, 0.0020015067890885013, 0.0038416527864739195,
          0.0025204162156181598, 0.001999912215712484, 0.008358342628176788,
          0.0044786588949412105, 0.0022392191316776616, 0.008357096152882038,
          0.004478669832318175, 0.002239555218630907,
        ],
      },
    },
    {
      age: 61,
      expected: {
        wet: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
        e_sk: [
          0.004420996652136314, 0.0011646364611922826, 0.007023044521841013,
          0.006457100621978046, 0.008858431024693742, 0.0038460633174753314,
          0.00252286197266619, 0.0020015067890885013, 0.0038416527864739195,
          0.0025204162156181598, 0.001999912215712484, 0.008358342628176788,
          0.0044786588949412105, 0.0022392191316776616, 0.008357096152882038,
          0.004478669832318175, 0.002239555218630907,
        ],
        e_max: [
          0.004420996652136314, 0.0011646364611922826, 0.007023044521841013,
          0.006457100621978046, 0.008858431024693742, 0.0038460633174753314,
          0.00252286197266619, 0.0020015067890885013, 0.0038416527864739195,
          0.0025204162156181598, 0.001999912215712484, 0.008358342628176788,
          0.0044786588949412105, 0.0022392191316776616, 0.008357096152882038,
          0.004478669832318175, 0.002239555218630907,
        ],
        e_sweat: [
          0.004420996652136314, 0.0011646364611922826, 0.007023044521841013,
          0.006457100621978046, 0.008858431024693742, 0.0038460633174753314,
          0.00252286197266619, 0.0020015067890885013, 0.0038416527864739195,
          0.0025204162156181598, 0.001999912215712484, 0.008358342628176788,
          0.0044786588949412105, 0.0022392191316776616, 0.008357096152882038,
          0.004478669832318175, 0.002239555218630907,
        ],
      },
    },
  ])(
    "should return the correct value when age is $age",
    ({ age, expected }) => {
      const result = evaporation(
        $lerp(17, 1, 3),
        $lerp(17, 3, 6),
        $lerp(17, 6, 9),
        $lerp(17, 12, 15),
        $lerp(17, 15, 18),
        $lerp(17, 18, 21),
        1.72,
        74.43,
        "dubois",
        age,
      );

      expect(result).toStrictEqual(expected);
    },
  );
});
